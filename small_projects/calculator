#Milo Troup P:6
import math
allowed_opp = ["+", "-", "*", "/", "**", "//", "%", "sqrt"]
allowed_costants = [("result", 0), ("PI", math.pi), ("e", math.e)]

class Step_Caculator:
    def __init__(self):
        self.result = allowed_costants[0][2]
        num1 = 0
        num2 = 0

    def two_numbs_ask(self):
        while True:
            num1 = input("Put the first number: ")
            num2 = input("Put the second number: ")
            try:
                num1 = float(num1)
            except ValueError:
                for constant in allowed_costants:
                    if num1 == constant[0]:
                        num1 = constant[1]
                        break
                else:
                    print("Invalid input for the first number. Please try again.")
                    continue

            try:
                num2 = float(num2)
            except ValueError:
                for constant in allowed_costants:
                    if num2 == constant[0]:
                        num2 = constant[1]
                        break
                else:
                    print("Invalid input for the second number. Please try again.")
                    continue

            return num1, num2

    def add(self, num1, num2):
        self.result = num1 + num2
        
    def subtract(self, num1, num2):
        self.result = num1 - num2

    def multiply(self, num1, num2):
        self.result = num1 * num2

    def divide(self, num1, num2):
        self.result = num1 / num2

    def power(self, num1, num2):
        self.result = num1 ** num2
    
    def root(self, num1, num2):
        self.result = num1 ** (1/num2)
    
    def floor_divide(self, num1, num2):
        self.result = num1 // num2
        
    def modulo(self, num1, num2):
        self.result = num1 % num2
    
    def get_result(self):
        return self.result
    
    def reset(self):
        self.result = 0
        
    def set_result(self, num):
        self.result = num
        
        

class Group_Caculator:
    def __init__(self):
        self.result = 0
    

   
def mainLoop_Step_Caculator():
    print("Welcome to the step calculator")
    while True:
        print('Say "+" to add')
        print('"-" to subtract')
        print('"*" to multiply')
        print('"/" to divide')
        print('"**" to power')
        print('"//" to floor divide')
        print('"%"" to modulo')
        print('"sqrt" to root')
        print('"r" to get previous result')
        print('"c" to clear previous result')
        
        user_input = input("Put number of what to do. ")

        if user_input == "h":
            print("You can only use the following opperations: {allowed_opp}")
            print("You can only use the following constants: {allowed_costants}")
        elif user_input == "+":
            Step_Caculator.two_numbs_ask()
            Step_Caculator.add()
            print(Step_Caculator.get_result())
            
        elif user_input == "-":
            Step_Caculator.two_numbs_ask()
            Step_Caculator.subtract()
            print(Step_Caculator.get_result())
            
        elif user_input == "*":
            Step_Caculator.two_numbs_ask()
            Step_Caculator.multiply()
            print(Step_Caculator.get_result())
            
        elif user_input == "/":
            Step_Caculator.two_numbs_ask()
            Step_Caculator.divide()
            print(Step_Caculator.get_result())
            
        elif user_input == "**":
            Step_Caculator.two_numbs_ask()
            Step_Caculator.power()
            print(Step_Caculator.get_result())
            
        elif user_input == "//":
            Step_Caculator.two_numbs_ask()
            Step_Caculator.floor_divide()
            print(Step_Caculator.get_result())
            
        elif user_input == "%":
            Step_Caculator.two_numbs_ask()
            Step_Caculator.modulo()
            print(Step_Caculator.get_result())
            
        elif user_input == "sqrt":
            Step_Caculator.two_numbs_ask()
            Step_Caculator.root()
            print(Step_Caculator.get_result())
            
        else:
            print("Invalid input")
            
    
    
def mainLoop_Group_Caculator():
    print("Welcome to the group calculator")
    while True:
        print(f"You can only use the following opperations: {allowed_opp}")
    
    
def switching_opperators():
    while True:
        if input("Do you want to switch opperations? (y/n) ") == "y":
            if input("Do you want to switch to the group calculator? (y/n) ") == "y":
                mainLoop_Group_Caculator()
            if input("Do you want to switch to the step calculator? (y/n) ") == "y":
                mainLoop_Step_Caculator()
        if input("Do you want to exit the calculator? (y/n) ") == "y":
            break
        
        
print("Welcome to the calculator")
if input("Do you want to use the group calculator or step calculator? (g/s) ") == "g":
    mainLoop_Group_Caculator()
else:
    mainLoop_Step_Caculator()

